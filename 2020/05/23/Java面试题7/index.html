<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Java面试题7 | 123</title><meta name="description" content="1.HashMap集合的特性1234561.HashMap是可以序列化的,是线程不安全的2.HashMap的底层主要是基于数组和链表实现的,它之所以有相当快的查询速度主要是因为它是通过计算散列码来决定存储位置的3.HashMap中主要是通过key的hashCode来计算hash值,然后通过hash值选择不同的数组来存储;只要hashCode相同,计算出来的hash值就一样,如果存储对象多了,就"><meta name="keywords" content="Java"><meta name="author" content="123"><meta name="copyright" content="123"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/123/img/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="dns-prefetch" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="dns-prefetch" href="https://fonts.googleapis.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="dns-prefetch" href="//busuanzi.ibruce.info"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Java面试题7"><meta name="twitter:description" content="1.HashMap集合的特性1234561.HashMap是可以序列化的,是线程不安全的2.HashMap的底层主要是基于数组和链表实现的,它之所以有相当快的查询速度主要是因为它是通过计算散列码来决定存储位置的3.HashMap中主要是通过key的hashCode来计算hash值,然后通过hash值选择不同的数组来存储;只要hashCode相同,计算出来的hash值就一样,如果存储对象多了,就"><meta name="twitter:image" content="https://img-blog.csdnimg.cn/2020052318420836.png"><meta property="og:type" content="article"><meta property="og:title" content="Java面试题7"><meta property="og:url" content="https://gao5805123.github.io/123/2020/05/23/Java%E9%9D%A2%E8%AF%95%E9%A2%987/"><meta property="og:site_name" content="123"><meta property="og:description" content="1.HashMap集合的特性1234561.HashMap是可以序列化的,是线程不安全的2.HashMap的底层主要是基于数组和链表实现的,它之所以有相当快的查询速度主要是因为它是通过计算散列码来决定存储位置的3.HashMap中主要是通过key的hashCode来计算hash值,然后通过hash值选择不同的数组来存储;只要hashCode相同,计算出来的hash值就一样,如果存储对象多了,就"><meta property="og:image" content="https://img-blog.csdnimg.cn/2020052318420836.png"><meta property="article:published_time" content="2020-05-23T10:40:43.000Z"><meta property="article:modified_time" content="2020-06-06T13:27:41.706Z"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = '1'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/123/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="https://gao5805123.github.io/123/2020/05/23/Java%E9%9D%A2%E8%AF%95%E9%A2%987/"><link rel="prev" title="对Windows的文件、文件夹进行空字符命名" href="https://gao5805123.github.io/123/2020/05/23/%E5%AF%B9Windows%E7%9A%84%E6%96%87%E4%BB%B6%E3%80%81%E6%96%87%E4%BB%B6%E5%A4%B9%E8%BF%9B%E8%A1%8C%E7%A9%BA%E5%AD%97%E7%AC%A6%E5%91%BD%E5%90%8D/"><link rel="next" title="关闭Windows自动更新" href="https://gao5805123.github.io/123/2020/05/23/%E5%85%B3%E9%97%ADWindows%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/123/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: {"text":"123,邪丶魔狱","fontSize":"15px"},
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'false',
  isFontAwesomeV5: false,
  isPhotoFigcaption: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="google-site-verification" content="pfcRZO1Gb4pmhedTsfidXjiu4Q25HFYON7GMwAXxEYQ" /><meta name="generator" content="Hexo 4.2.1"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/123/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/123/archives/"><div class="headline">文章</div><div class="length_num">189</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/123/tags/"><div class="headline">标签</div><div class="length_num">12</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/123/categories/"><div class="headline">分类</div><div class="length_num">12</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/123/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/123/archives/"><i class="fa-fw fa fa-archive"></i><span> 档案</span></a></div><div class="menus_item"><a class="site-page" href="/123/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/123/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/123/link/"><i class="fa-fw fa fa-link"></i><span> 链接</span></a></div><div class="menus_item"><a class="site-page" href="/123/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 列表</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/123/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li></ul></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-HashMap集合的特性"><span class="toc-number">1.</span> <span class="toc-text">1.HashMap集合的特性</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-int和Integer的区别"><span class="toc-number">2.</span> <span class="toc-text">2.int和Integer的区别</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-数据结构中的栈和队列的区别"><span class="toc-number">3.</span> <span class="toc-text">3.数据结构中的栈和队列的区别</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-使用Redis有哪些好处？"><span class="toc-number">4.</span> <span class="toc-text">4.使用Redis有哪些好处？</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-数据结构中的栈和队列的区别"><span class="toc-number">5.</span> <span class="toc-text">5.数据结构中的栈和队列的区别</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-InnoDB和MyISAM的区别"><span class="toc-number">6.</span> <span class="toc-text">6.InnoDB和MyISAM的区别</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-MySQL优化"><span class="toc-number">7.</span> <span class="toc-text">7.MySQL优化</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-InnoDB和MyISAM的区别"><span class="toc-number">8.</span> <span class="toc-text">8.InnoDB和MyISAM的区别</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#9-转发和重定向的区别"><span class="toc-number">9.</span> <span class="toc-text">9.转发和重定向的区别</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#10-RabbitMQ如何保证消息不丢失"><span class="toc-number">10.</span> <span class="toc-text">10.RabbitMQ如何保证消息不丢失?</span></a></li></ol></div></div></div><div id="body-wrap"><div class="post-bg" id="nav" style="background-image: url(https://img-blog.csdnimg.cn/2020052318420836.png)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/123/">123</a></span><span class="pull_right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/123/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/123/archives/"><i class="fa-fw fa fa-archive"></i><span> 档案</span></a></div><div class="menus_item"><a class="site-page" href="/123/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/123/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/123/link/"><i class="fa-fw fa fa-link"></i><span> 链接</span></a></div><div class="menus_item"><a class="site-page" href="/123/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 列表</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/123/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li></ul></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">Java面试题7</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2020-05-23 18:40:43"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2020-05-23</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2020-06-06 21:27:41"><i class="fa fa-history" aria-hidden="true"></i> 更新于 2020-06-06</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/123/categories/Java/">Java</a></span></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div id="article-container"><div style="user-select: none">

<h1 id="1-HashMap集合的特性"><a href="#1-HashMap集合的特性" class="headerlink" title="1.HashMap集合的特性"></a><strong>1.HashMap集合的特性</strong></h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.HashMap是可以序列化的,是线程不安全的</span><br><span class="line"><span class="number">2</span>.HashMap的底层主要是基于数组和链表实现的,它之所以有相当快的查询速度主要是因为它是通过计算散列码来决定存储位置的</span><br><span class="line"><span class="number">3</span>.HashMap中主要是通过key的hashCode来计算hash值,然后通过hash值选择不同的数组来存储;只要hashCode相同,计算出来的hash值就一样,如果存储对象多了,就有可能不同的对象计算出来的hash值是相同的,这就出现了所谓的hash冲突,HashMap的底层是通过链表来解决hash冲突的;具体就是把相同hash值的HashMap,通过链表的形式进行存储,相当于存储的数组就是哈希表,数组的每个元素都是一个单链表的头结点,链表是用来解决hash冲突的,如果不同的key映射到了数组的同一位置,那么就将其放入单链表中</span><br><span class="line"><span class="number">4</span>.HashMap的遍历方式比较单一,一般分两步走:</span><br><span class="line">	<span class="number">1</span>. 获得Entry或key或value的Set集合</span><br><span class="line">	<span class="number">2</span>. 通过Iterator迭代器遍历此Set集合</span><br></pre></td></tr></table></figure>
<h1 id="2-int和Integer的区别"><a href="#2-int和Integer的区别" class="headerlink" title="2.int和Integer的区别"></a><strong>2.int和Integer的区别</strong></h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Integer是<span class="keyword">int</span>提供的封装类,<span class="keyword">int</span>是基本数据类型中的一种</span><br><span class="line">Integer的默认值是<span class="keyword">null</span>,<span class="keyword">int</span>的默认值是<span class="number">0</span></span><br><span class="line">Integer是一个对象,需要一个引用来指向这个对象,<span class="keyword">int</span>是基本数据类型,直接存储在内存中</span><br><span class="line">声明为Integer的变量需要实例化,声明为<span class="keyword">int</span>的变量不需要实例化</span><br></pre></td></tr></table></figure>
<h1 id="3-数据结构中的栈和队列的区别"><a href="#3-数据结构中的栈和队列的区别" class="headerlink" title="3.数据结构中的栈和队列的区别"></a><strong>3.数据结构中的栈和队列的区别</strong></h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">栈: 后进先出</span><br><span class="line">队列: 先进先出</span><br><span class="line">Queue: 先进先出</span><br></pre></td></tr></table></figure>
<h1 id="4-使用Redis有哪些好处？"><a href="#4-使用Redis有哪些好处？" class="headerlink" title="4.使用Redis有哪些好处？"></a><strong>4.使用Redis有哪些好处？</strong></h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">速度快,因为数据存在内存中,类似于HashMap，HashMap的优势就是查找和操作的时间复杂度都是O(<span class="number">1</span>)</span><br><span class="line">支持丰富数据类型,支持string,list,set,Zset,hash等</span><br><span class="line">支持事务,操作都是原子性,所谓的原子性就是对数据的更改要么全部执行,要么全部不执行</span><br><span class="line">丰富的特性:可用于缓存,消息,按key设置过期时间,过期后将会自动删除</span><br></pre></td></tr></table></figure>
<h1 id="5-数据结构中的栈和队列的区别"><a href="#5-数据结构中的栈和队列的区别" class="headerlink" title="5.数据结构中的栈和队列的区别"></a><strong>5.数据结构中的栈和队列的区别</strong></h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">栈: 后进先出</span><br><span class="line">队列: 先进先出</span><br><span class="line">Queue: 先进先出</span><br></pre></td></tr></table></figure>
<h1 id="6-InnoDB和MyISAM的区别"><a href="#6-InnoDB和MyISAM的区别" class="headerlink" title="6.InnoDB和MyISAM的区别"></a><strong>6.InnoDB和MyISAM的区别</strong></h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">MyISAM不支持事务</span><br><span class="line">MyISAM不支持外键</span><br><span class="line">MyISAM支持全文索引</span><br><span class="line">InnoDB支持表、行(默认)级锁，而MyISAM支持表级锁</span><br><span class="line">MyISAM可以没有主键</span><br></pre></td></tr></table></figure>
<h1 id="7-MySQL优化"><a href="#7-MySQL优化" class="headerlink" title="7.MySQL优化"></a><strong>7.MySQL优化</strong></h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.优化SQL语句</span><br><span class="line">	尽量避免全表扫描</span><br><span class="line">	尽量避免在where子句中使用!=或&lt;&gt;</span><br><span class="line">	尽量避免在where子句中对字段进行<span class="keyword">null</span>值判断,否则将导致引擎放弃使用索引而进行全表扫描</span><br><span class="line">	尽量避免在where子句中使用or来连接条件,否则将导致引擎放弃使用索引而进行全表扫描</span><br><span class="line"><span class="number">2</span>.索引</span><br><span class="line">	Normal普通索引没有约束,Unique唯一索引,Full Text全文索引(大文本,长消息)</span><br><span class="line">	使用BTree B+Tree Hash索引</span><br><span class="line">	BTree:左子叶节点数&lt;父节点数,右子叶节点数&gt;父节点数 如果树的高度太高的话,会影响查询效率,所以使用B+Tree</span><br><span class="line"><span class="number">3</span>.建立索引的规则</span><br><span class="line">	表的主键、外键必须有索引</span><br><span class="line">	经常查询的字段</span><br><span class="line">	删除无用的索引，避免对执行计划造成负面影响</span><br><span class="line">	索引应该建在选择性高的字段上</span><br></pre></td></tr></table></figure>
<h1 id="8-InnoDB和MyISAM的区别"><a href="#8-InnoDB和MyISAM的区别" class="headerlink" title="8.InnoDB和MyISAM的区别"></a><strong>8.InnoDB和MyISAM的区别</strong></h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">MyISAM不支持事务</span><br><span class="line">MyISAM不支持外键</span><br><span class="line">MyISAM支持全文索引</span><br><span class="line">InnoDB支持表、行(默认)级锁，而MyISAM支持表级锁</span><br><span class="line">MyISAM可以没有主键</span><br></pre></td></tr></table></figure>
<h1 id="9-转发和重定向的区别"><a href="#9-转发和重定向的区别" class="headerlink" title="9.转发和重定向的区别"></a><strong>9.转发和重定向的区别</strong></h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">转发: </span><br><span class="line">	 <span class="number">1</span>.地址栏不发生变化,显示的是上一个页面的地址</span><br><span class="line">    <span class="number">2</span>.请求次数: 只有<span class="number">1</span>次请求</span><br><span class="line">    <span class="number">3</span>.根目录:包含了项目的访问地址</span><br><span class="line">    <span class="number">4</span>.请求域中数据不会丢失</span><br><span class="line">重定向:</span><br><span class="line">    <span class="number">1</span>.地址栏: 显示新的地址</span><br><span class="line">    <span class="number">2</span>.请求次数: <span class="number">2</span>次</span><br><span class="line">    <span class="number">3</span>.根目录: 没有项目的名字</span><br><span class="line">    <span class="number">4</span>.请求域中的数据会丢失,因为是<span class="number">2</span>次请求</span><br></pre></td></tr></table></figure>
<h1 id="10-RabbitMQ如何保证消息不丢失"><a href="#10-RabbitMQ如何保证消息不丢失" class="headerlink" title="10.RabbitMQ如何保证消息不丢失?"></a><strong>10.RabbitMQ如何保证消息不丢失?</strong></h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.消息持久化: RabbitMQ的消息默认存放在内存上面,如果不特别声明设置,消息不会持久化保存到硬盘上面的,如果节点重启或者意外crash掉,消息就会丢失</span><br><span class="line"><span class="number">2</span>.ACK确认机制: 这个使用就要使用Message acknowledgment机制,就是消费端消费完成要通知服务端,服务端才把消息从内存删除;这样就解决了,及时一个消费者出了问题，没有同步消息给服务端，还有其他的消费端去消费,保证了消息不丢的<span class="keyword">case</span></span><br><span class="line"><span class="number">3</span>.设置集群镜像模式: 单节点模式 普通模式 镜像模式</span><br><span class="line"><span class="number">4</span>.消息补偿机制: 比如：持久化的消息,保存到硬盘过程中,当前队列节点挂了,存储节点硬盘又坏了,消息丢了,怎么办？</span><br><span class="line">产线网络环境太复杂,所以不知数太多,消息补偿机制需要建立在消息要写入DB日志,发送日志,接受日志,两者的状态必须记录;然后根据DB日志记录check消息发送消费是否成功,不成功,进行消息补偿措施,重新发送消息处理</span><br></pre></td></tr></table></figure>

</div></div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">123</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://gao5805123.github.io/123/2020/05/23/Java%E9%9D%A2%E8%AF%95%E9%A2%987/">https://gao5805123.github.io/123/2020/05/23/Java%E9%9D%A2%E8%AF%95%E9%A2%987/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://gao5805123.github.io/123" target="_blank">123</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/123/tags/Java/">Java</a></div><div class="post_share"><div class="social-share" data-image="https://img-blog.csdnimg.cn/20210629111641657.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="/123/img/WeChat.jpg" alt="微信"/><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="/123/img/PayTreasure.jpg" alt="支付宝"/><div class="post-qr-code__desc">支付宝</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/123/2020/05/23/%E5%AF%B9Windows%E7%9A%84%E6%96%87%E4%BB%B6%E3%80%81%E6%96%87%E4%BB%B6%E5%A4%B9%E8%BF%9B%E8%A1%8C%E7%A9%BA%E5%AD%97%E7%AC%A6%E5%91%BD%E5%90%8D/"><img class="prev_cover lazyload" data-src="https://img-blog.csdnimg.cn/20200524002403372.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">对Windows的文件、文件夹进行空字符命名</div></div></a></div><div class="next-post pull_right"><a href="/123/2020/05/23/%E5%85%B3%E9%97%ADWindows%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0/"><img class="next_cover lazyload" data-src="https://img-blog.csdnimg.cn/20200523004257954.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">关闭Windows自动更新</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/123/2021/06/29/ConcurrentHashMap/" title="ConcurrentHashMap"><img class="relatedPosts_cover lazyload"data-src="https://img-blog.csdnimg.cn/20210629110659535.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2021-06-29</div><div class="relatedPosts_title">ConcurrentHashMap</div></div></a></div><div class="relatedPosts_item"><a href="/123/2020/05/04/BeanCreationException和IllegalStateException Ambiguous mapping. Cannot map 'brandController' method/" title="org.springframework.beans.factory.BeanCreationException Error creating bean with name requestMappingHandlerMapping defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class] Invocation of init method failed; nested exception is java.lang.IllegalStateException Ambiguous mapping. Cannot map brandController method"><img class="relatedPosts_cover lazyload"data-src="https://img-blog.csdnimg.cn/20200504174150440.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-05-04</div><div class="relatedPosts_title">org.springframework.beans.factory.BeanCreationException Error creating bean with name requestMappingHandlerMapping defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class] Invocation of init method failed; nested exception is java.lang.IllegalStateException Ambiguous mapping. Cannot map brandController method</div></div></a></div><div class="relatedPosts_item"><a href="/123/2020/05/04/ClassCastException com.gao5805123.servlet.ServletDemo cannot be cast to javax.servlet.Servlet/" title="ClassCastException com.gao5805123.servlet.ServletDemo cannot be cast to javax.servlet.Servlet"><img class="relatedPosts_cover lazyload"data-src="https://img-blog.csdnimg.cn/20200504144626989.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-05-04</div><div class="relatedPosts_title">ClassCastException com.gao5805123.servlet.ServletDemo cannot be cast to javax.servlet.Servlet</div></div></a></div><div class="relatedPosts_item"><a href="/123/2020/05/04/CannotGetJdbcConnectionException、SQLException和com.mysql.cj.exceptions.InvalidConnectionAttributeException The server time zone value is unrecognized or represents more than one time zone/" title="CannotGetJdbcConnectionException、SQLException和InvalidConnectionAttributeException The server time zone value is unrecognized or represents more than one time zone. You must configure either the server or JDBC driver (via the serverTimezone configuration property) to use a more specifc time zone value if you want to utilize time zone support"><img class="relatedPosts_cover lazyload"data-src="https://img-blog.csdnimg.cn/20200514020018559.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-05-04</div><div class="relatedPosts_title">CannotGetJdbcConnectionException、SQLException和InvalidConnectionAttributeException The server time zone value is unrecognized or represents more than one time zone. You must configure either the server or JDBC driver (via the serverTimezone configuration property) to use a more specifc time zone value if you want to utilize time zone support</div></div></a></div><div class="relatedPosts_item"><a href="/123/2020/05/03/ConnectExceptionConnection refused connect  & TransportCannotexecute request on any known server/" title="ConnectExceptionConnection refused connect  & TransportCannotexecute request on any known server"><img class="relatedPosts_cover lazyload"data-src="https://img-blog.csdnimg.cn/2020050316460777.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-05-03</div><div class="relatedPosts_title">ConnectExceptionConnection refused connect  & TransportCannotexecute request on any known server</div></div></a></div><div class="relatedPosts_item"><a href="/123/2020/05/04/CommunicationsException Communications link failure和java.net.ConnectException Connection refused connect/" title="CommunicationsException Communications link failure和java.net.ConnectException Connection refused connect"><img class="relatedPosts_cover lazyload"data-src="https://img-blog.csdnimg.cn/20200504180214734.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-05-04</div><div class="relatedPosts_title">CommunicationsException Communications link failure和java.net.ConnectException Connection refused connect</div></div></a></div></div><div class="clear_both"></div></div></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2021 By 123</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="footer_custom_text">感谢你的关注</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/123/js/utils.js"></script><script src="/123/js/main.js"></script><script src="/123/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><script src="/123/js/third-party/ClickShowText.js"></script><script src="/123/js/search/local-search.js"></script><script src="/123/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/123/live2dw/assets/koharu.model.json"},"display":{"position":"right","width":145,"height":315},"mobile":{"show":true,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.8},"dialog":{"enable":true,"hitokoto":true},"log":false});</script></body></html>